{"schemas":"DEFINE TABLE chat_messages SCHEMAFULL PERMISSIONS NONE;\n\nDEFINE FIELD message ON chat_messages TYPE string;\nDEFINE FIELD created_at ON users TYPE datetime DEFAULT time::now();\nDEFINE FIELD updated_at ON users TYPE datetime VALUE time::now();\nDEFINE TABLE chats SCHEMAFULL PERMISSIONS NONE;\n\nDEFINE FIELD in ON TABLE chats;\nDEFINE FIELD out ON TABLE chats;\nDEFINE FIELD disabled_by_in ON chats TYPE bool DEFAULT false;\nDEFINE FIELD disabled_by_out ON chats TYPE bool DEFAULT false;\nDEFINE FIELD created_at ON chats TYPE datetime DEFAULT time::now();\n// TODO: Trigger if new messags\nDEFINE FIELD updated_at ON chats TYPE datetime VALUE time::now();\n\nDEFINE INDEX unique_relationship \n    ON TABLE chats \n    COLUMNS in, out UNIQUE;\n\n// TODO: Messages count\nDEFINE TABLE matches SCHEMAFULL PERMISSIONS NONE;\n\nDEFINE FIELD in ON TABLE matches;\nDEFINE FIELD out ON TABLE matches;\nDEFINE FIELD created_at ON matches TYPE datetime DEFAULT time::now();\nDEFINE FIELD updated_at ON matches TYPE datetime VALUE time::now();\n\nDEFINE INDEX unique_relationship \n    ON TABLE matches \n    COLUMNS in, out UNIQUE;\n\nDEFINE TABLE script_migration SCHEMAFULL\n    PERMISSIONS\n        FOR select FULL\n        FOR create, update, delete NONE;\n\nDEFINE FIELD script_name ON script_migration TYPE string;\nDEFINE FIELD executed_at ON script_migration TYPE datetime VALUE time::now() READONLY;\nDEFINE TABLE user_images SCHEMAFULL PERMISSIONS NONE;\n\nDEFINE FIELD height ON user_images TYPE int;\nDEFINE FIELD width ON user_images TYPE int;\nDEFINE FIELD url ON user_images TYPE string;\nDEFINE FIELD mime_type ON user_images TYPE string;\nDEFINE FIELD blurhash ON user_images TYPE string;\nDEFINE FIELD file_name ON user_images TYPE string;\nDEFINE FIELD is_default ON user_images TYPE bool DEFAULT false;\nDEFINE FIELD created_at ON users TYPE datetime DEFAULT time::now();\nDEFINE TABLE users TYPE ANY SCHEMAFULL\n\tPERMISSIONS NONE\n;\nDEFINE FIELD email ON users TYPE string ASSERT string::is::email($value)\n\tPERMISSIONS FULL\n;\nDEFINE FIELD username ON users TYPE string | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD last_name ON users TYPE string | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD first_name ON users TYPE string | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD birth_date ON users TYPE datetime | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD age ON users TYPE int | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD gender ON users TYPE string | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD preference ON users TYPE string | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD metric ON users TYPE bool DEFAULT true\n\tPERMISSIONS FULL\n;\nDEFINE FIELD height ON users TYPE int | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD weight ON users TYPE int | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD bio ON users TYPE string | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD interests ON users TYPE array<string> | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD current_location ON users TYPE point | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD max_distance ON users TYPE int DEFAULT 25\n\tPERMISSIONS FULL\n;\nDEFINE FIELD age_range ON users TYPE array<int> | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD max_match_count ON users TYPE int DEFAULT 10\n\tPERMISSIONS FULL\n;\nDEFINE FIELD active_hours ON users TYPE array<int> | null DEFAULT NULL\n\tPERMISSIONS FULL\n;\nDEFINE FIELD has_pet ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD has_car ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD has_house ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD need_pet ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD need_car ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD need_house ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD open_for_travel_together ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD is_registration_completed ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD is_paid_travel ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD is_verified ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD is_banned ON users TYPE bool DEFAULT false\n\tPERMISSIONS FULL\n;\nDEFINE FIELD created_at ON users TYPE datetime DEFAULT time::now()\n\tPERMISSIONS FULL\n;\nDEFINE FIELD updated_at ON users TYPE datetime VALUE time::now()\n\tPERMISSIONS FULL\n;\nDEFINE INDEX user_email_index ON users FIELDS email UNIQUE;\nDEFINE INDEX user_name_index ON users FIELDS username UNIQUE;","events":""}